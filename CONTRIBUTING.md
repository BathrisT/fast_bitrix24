# Подготовка к запуску тестов

Для прогона тестов вам понадобится тестовый аккаунт Битрикс24. Я рекомендую создать новый аккаунт (благо, это бесплатно).
Можно использовать и существующий, но нужно быть готовым к тому, что *тесты удаляют существующую в аккаунте информацию*.

1. Создать новый аккаунт Битрикс24: https://www.bitrix24.ru/create.php
2. Создать входящий вебхук: https://your-account-name-here.bitrix24.ru/marketplace/hook/ap/0/
3. Разрешить вебхуку доступ к CRM.
4. Скопировать URL получившегося вебхука (например, `https://b24-agnh1d.bitrix24.ru/rest/1/fph4v4ncmrcxhhbn/`).
5. Создать переменную окружения `FAST_BITRIX24_TEST_WEBHOOK` и присвоить ей скопированное значение.
6. В аккаунте выбрать классический режим CRM (с лидами) - так как некоторые тесты используют лиды. 

## А если мне лень создавать свой тестовый аккаунт?
Вы можете использовать мой - `https://b24-agnh1d.bitrix24.ru/rest/1/fph4v4ncmrcxhhbn/`. Напишите мне, если хотите добавиться в аккаунт как пользователь.

# Подготовка к pull request

1. В идеале сделать `rebase master`.
2. Убедитесь, что все существующие тесты проходят успешно.
3. Когда будете писать свои тесты, убедитесь, что они удаляют создаваемые ими в аккаунте объекты. Иначе, когда будет создано более 1000 элементов, через какое-то время аккаунт будет заблокирован. Для простоты, если можно ваши изменения протестировать на лидах, лучше использовать их (чтобы объекты контроля концентрировались в одном месте).
4. В описании упомяните, какой тест (новый или существующий) проверяет добавленную или исправленную вами функциональность.

